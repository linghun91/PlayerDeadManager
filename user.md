# PlayerDeadManager (PDM) - 用户使用手册

## 📖 插件简介

PlayerDeadManager 是一个功能强大的墓碑插件，当你在游戏中死亡时，会自动创建一个墓碑来保护你的物品和经验值。你可以通过多种方式找回你的物品，包括直接交互、GUI界面和传送功能。

## 🎮 核心功能

### 🪦 墓碑系统
- **自动创建**: 死亡时自动在死亡位置创建墓碑
- **物品保护**: 保护你掉落的所有物品和经验值
- **时间保护**: 墓碑在一定时间内只有你能访问
- **自动清理**: 24小时后自动清理无人认领的墓碑
- **数量限制**: 每个玩家最多同时拥有3个墓碑

### 🔮 保存图腾
- **特殊物品**: 使用保存图腾可以在死亡时保护物品
- **消耗机制**: 死亡时自动消耗1个保存图腾
- **完全保护**: 使用图腾后物品和经验完全不会掉落

### 🖥️ GUI界面系统
- **传送GUI**: 查看所有墓碑位置并快速传送
- **物品回收GUI**: 直接从界面中取回物品和经验
- **直观操作**: 点击即可完成各种操作

## 🎯 基本使用方法

### 死亡后的操作流程

1. **死亡时**: 系统自动创建墓碑，显示位置信息
2. **寻找墓碑**: 
   - 使用 `/pdm list` 查看墓碑列表
   - 使用 `/pdm gui` 打开传送界面
   - 跟随粒子效果和全息图指引
3. **回收物品**:
   - 右键点击墓碑打开物品回收界面
   - 在GUI中点击物品直接取回
   - 点击经验按钮取回经验值

### 墓碑交互方式

#### 方式一：直接交互
- **右键点击墓碑**: 打开物品回收GUI界面
- **在GUI中右键点击物品**: 将物品取回到背包
- **点击经验按钮**: 取回所有经验值

#### 方式二：命令操作
- **查看列表**: `/pdm list` - 显示所有墓碑位置
- **传送到墓碑**: `/pdm teleport <编号>` - 传送到指定墓碑
- **打开GUI**: `/pdm gui` - 打开传送界面

## 📋 命令列表

### 基础命令
| 命令 | 描述 | 权限 |
|------|------|------|
| `/pdm help` | 显示帮助信息 | `playerdeadmanager.use` |
| `/pdm list` | 查看你的墓碑列表 | `playerdeadmanager.list` |
| `/pdm gui` | 打开传送GUI界面 | `playerdeadmanager.gui` |
| `/pdm teleport <编号>` | 传送到指定墓碑 | `playerdeadmanager.teleport` |
| `/pdm info` | 查看插件信息 | `playerdeadmanager.use` |

### 管理员命令
| 命令 | 描述 | 权限 |
|------|------|------|
| `/pdm reload` | 重新加载配置文件 | `playerdeadmanager.admin.reload` |

### 命令别名
- `/pdm` = `/playerdeadmanager`
- 所有命令都支持完整名称

## 🔐 权限系统

### 玩家权限
- `playerdeadmanager.use` - 使用墓碑系统的基本权限 (默认: 所有玩家)
- `playerdeadmanager.gui` - 使用GUI界面的权限 (默认: 所有玩家)
- `playerdeadmanager.teleport` - 传送到墓碑的权限 (默认: 所有玩家)
- `playerdeadmanager.list` - 查看墓碑列表的权限 (默认: 所有玩家)

### 管理员权限
- `playerdeadmanager.admin` - 管理员权限 (默认: OP)
- `playerdeadmanager.admin.reload` - 重载配置权限 (默认: OP)
- `playerdeadmanager.access.expired` - 访问过期墓碑权限 (默认: OP)
- `playerdeadmanager.*` - 所有权限

## 🎨 界面功能详解

### 传送GUI界面
- **界面标题**: "死亡地点传送"
- **墓碑图标**: 显示墓碑位置、死亡时间、保护状态
- **点击传送**: 点击墓碑图标即可传送到该位置
- **费用显示**: 如果启用传送费用，会显示所需金币

### 物品回收GUI界面
- **界面标题**: "墓碑物品回收"
- **物品展示**: 前5行显示墓碑中的所有物品
- **经验按钮**: 最后一行显示经验取回按钮
- **关闭按钮**: 最后一行的关闭界面按钮
- **右键取出**: 右键点击物品即可取回到背包

## ✨ 特殊功能

### 🔍 视觉引导系统
- **全息图显示**: 墓碑上方显示所有者和时间信息
- **粒子效果**: 墓碑周围产生粒子效果便于寻找
- **距离提示**: 靠近墓碑时显示发现提示

### 🛡️ 保护机制
- **时间保护**: 墓碑创建后60分钟内只有所有者能访问
- **过期访问**: 保护期过后其他玩家可以拾取物品
- **拾取通知**: 当其他玩家拾取你的墓碑时会收到通知

### 📊 经验处理
- **完整恢复**: 墓碑所有者可以完整取回经验
- **部分获得**: 其他玩家拾取时只能获得50%的经验
- **等级保护**: 可配置是否保留经验等级

## 🌍 世界限制

### 启用世界
- 默认在所有世界启用墓碑功能
- 可通过配置文件自定义启用的世界列表

### 禁用世界
- 默认在下界和末地禁用墓碑功能
- 管理员可以通过配置文件调整禁用世界列表

## 💰 经济系统

### 传送费用
- 可配置传送到墓碑是否需要费用
- 需要安装Vault插件支持
- 默认费用: 100金币 (可配置)
- 可以完全禁用费用系统

## 🔧 兼容性

### 支持的插件
- **Vault**: 经济系统支持
- **Oraxen**: 自定义方块支持
- **WorldGuard**: 区域保护支持 (可选)
- **GriefPrevention**: 领地保护支持 (可选)

### 服务器要求
- **服务端**: Paper 1.20.1 或更高版本
- **Java版本**: Java 17 或更高版本

## 📝 使用技巧

### 快速找回物品
1. 死亡后立即使用 `/pdm gui` 打开传送界面
2. 点击最新的墓碑图标传送到死亡位置
3. 右键点击墓碑打开物品回收界面
4. 右键点击需要的物品快速取回

### 保存图腾使用
1. 提前准备保存图腾 (不死图腾)
2. 将图腾放在背包中
3. 死亡时图腾自动激活，物品不会掉落

### 管理多个墓碑
1. 使用 `/pdm list` 查看所有墓碑
2. 记住墓碑编号，使用 `/pdm teleport <编号>` 快速传送
3. 及时清理不需要的墓碑，避免达到数量限制

## ❓ 常见问题

**Q: 为什么我的墓碑没有创建？**
A: 检查当前世界是否启用墓碑功能，以及是否达到墓碑数量限制。

**Q: 其他玩家能拿我的物品吗？**
A: 墓碑有60分钟保护期，期间只有你能访问。过期后其他玩家可以拾取。

**Q: 墓碑什么时候会消失？**
A: 墓碑会在24小时后自动清理，或者当物品全部取完时立即消失。

**Q: 如何获得保存图腾？**
A: 保存图腾就是普通的不死图腾，可以通过游戏内正常方式获得。

**Q: 传送需要费用吗？**
A: 默认不需要费用，管理员可以通过配置文件启用传送费用。

## 📞 支持与反馈

如果在使用过程中遇到问题或有建议，请联系服务器管理员。插件支持完全自定义配置，管理员可以根据服务器需求调整各项设置。
